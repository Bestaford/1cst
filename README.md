# 1cst

Кросс-платформенная утилита на Python для массового завершения сеансов во всех базах всех кластеров на сервере,
выполненная в виде обёртки над RAS/RAC.

* Запускает RAS из указанной установки сервера 1С (либо определяет установленную платформу автоматически)
* Запускает RAC и парсит его вывод, завершает все сеансы, кроме фоновых задач и COM-соединений (если не указана
  опция `-a`)
* Завершает RAS

## Использование

`1cst[.exe] [опции]`

Или напрямую с помощью Python:

`pip install -r requirements.txt`

`python 1cst.py [опции]`

## Опции

`-P`, `--platform-path` - путь до платформы 1С (например, `C:\Program Files\1cv8\8.3.18.1741`
или `/opt/1cv8/x86_64/8.3.18.1741`)

`-u`, `--cluster-user` - имя администратора кластера

`-p`, `--cluster-password` - пароль администратора кластера

`-l`, `--log` - директория журнала (по умолчанию располагается в рабочей директории)

`-a`, `--all` - завершение всех сеансов, включая фоновые задачи и COM-соединения

`-v`, `--verbose` - включает вывод отладочной информации (поток вывода RAS и RAC, traceback, служебные логи)

`-V`, `--version` - выводит версию программы

`-h`, `--help` - выводит справку

## Сборка в единый исполняемый файл вместе с Python

Требования: Python 3, pip

В директории с проектом выполнить:

`pip install virtualenv`

`python -m venv venv`

Далее для Windows:

`.\venv\Scripts\pip.exe install wheel`

`.\venv\Scripts\pip.exe install -r requirements.txt`

`.\venv\Scripts\python.exe build.py`

Для Linux:

`./venv/bin/pip install wheel`

`./venv/bin/pip install -r requirements.txt`

`./venv/bin/python build.py`

Готовый бандл вместе с интерпретатором и скриптом будет находиться в директории "dist".
